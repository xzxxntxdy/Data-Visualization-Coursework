// ============================================================================
// COCO-Verse 项目中期汇报
// 编译方式：typst compile main_midterm.typ
// ============================================================================

#import "@preview/touying:0.6.1": *
#import themes.metropolis: *

#show: metropolis-theme.with(
  aspect-ratio: "16-9",
  config-info(
    title: [可视化大作业 · 中期汇报],
    subtitle: [数据可视化课程项目],
    author: [匡航逸 · 柯云超 · 谢博],
  ),
)

// ============================================================================
// 封面页
// ============================================================================
== COCO-Verse：多视图可视化分析系统

#align(center)[
  #text(size: 1.2em)[数据可视化课程大作业 · *中期汇报*]
  
  #v(0.5em)
  组名：你说的队
  #v(0.5em)
  组员：匡航逸 , 柯云超 , 谢博
  
  #v(1em)
]

// ============================================================================
// 汇报大纲
// ============================================================================
== 汇报大纲

#grid(
  columns: (1fr, 1fr),
  column-gutter: 2em,
  [
    === 已完成内容
    
    + 数据集调研与选择
    + 分析目标确定
    + 数据预处理脚本
    + 核心视图原型实现
      - 语义共现网络 ✅
      - 空间分布视图 ✅
  ],
  [
    === 待完成内容
    
    + 人体姿态视图
    + 视图间交互联动
    + 门户页面设计
    + 案例分析与优化
    + 项目文档整理
  ]
)

// ============================================================================
// 数据介绍
// ============================================================================
== 数据介绍

#grid(
  columns: (1fr, 1fr),
  column-gutter: 2em,
  [
    === COCO 2017 数据集
    
    *Common Objects in Context* 是计算机视觉领域最具影响力的大规模数据集：
    
    - *图像规模*：123,287 张训练/验证图像
    - *物体类别*：80 个常见物体类别
    - *实例标注*：860,000+ 边界框与分割标注
    - *姿态标注*：250,000+ 人体关键点标注
    
    #v(0.5em)
    
    *数据来源*：#link("https://cocodataset.org/")[cocodataset.org]
  ],
  [
    === 类别涵盖
    
    #table(
      columns: (auto, auto),
      stroke: 0.5pt + gray,
      [超类别], [示例],
      [人], [person],
      [交通工具], [car, bicycle, airplane],
      [动物], [dog, cat, bird, horse],
      [室内物品], [chair, couch, bed],
      [厨房用品], [bottle, cup, fork, knife],
      [电子设备], [laptop, cell phone, tv],
      [运动器材], [sports ball, tennis racket],
      [食物], [pizza, cake, banana],
    )
  ]
)

// ============================================================================
// 分析目标
// ============================================================================
== 分析目标

#grid(
  columns: (1fr, 1fr, 1fr),
  column-gutter: 1.5em,
  [
    #rect(
      width: 100%,
      fill: rgb("#e0f2fe"),
      radius: 8pt,
      inset: 1em,
    )[
      === 空间分布分析
      
      - 不同类别的物体在图像中如何分布？
      - 边缘 vs 中心位置偏好？
      - 小/中/大目标的空间特征？
      
      #v(0.5em)
      #text(fill: gray, size: 0.9em)[
        揭示视觉构图规律
      ]
    ]
  ],
  [
    #rect(
      width: 100%,
      fill: rgb("#dcfce7"),
      radius: 8pt,
      inset: 1em,
    )[
      === 语义共现分析
      
      - 哪些物体经常同时出现？
      - 条件概率关系如何？
      - 是否存在语义场景聚类？
      
      #v(0.5em)
      #text(fill: gray, size: 0.9em)[
        挖掘物体关联模式
      ]
    ]
  ],
  [
    #rect(
      width: 100%,
      fill: rgb("#fef3c7"),
      radius: 8pt,
      inset: 1em,
    )[
      === 人体姿态分析
      
      - 关键点可见性分布如何？
      - 不同场景下的典型姿态？
      - 遮挡模式有何规律？
      
      #v(0.5em)
      #text(fill: gray, size: 0.9em)[
        理解人体行为特征
      ]
    ]
  ]
)

// ============================================================================
// 数据处理流程
// ============================================================================
== 数据处理流程（已完成）

#align(center)[
  #grid(
    columns: (1fr, auto, 1fr, auto, 1fr),
    column-gutter: 0.5em,
    row-gutter: 1em,
    [
      #rect(
        fill: rgb("#f0f9ff"),
        radius: 8pt,
        inset: 0.8em,
      )[
        *原始数据*
        
        - instances\_train2017.json
        - person\_keypoints\_train2017.json
        
        #text(size: 0.8em, fill: gray)[~19GB]
      ]
    ],
    [→],
    [
      #rect(
        fill: rgb("#fefce8"),
        radius: 8pt,
        inset: 0.8em,
      )[
        *Python 预处理*
        
        - process\_spatial.py ✅
        - process\_semantic.py ✅
        - process\_pose.py ✅
        
        #text(size: 0.8em, fill: gray)[采样 + 聚合]
      ]
    ],
    [→],
    [
      #rect(
        fill: rgb("#f0fdf4"),
        radius: 8pt,
        inset: 0.8em,
      )[
        *前端 JSON*
        
        - spatial\_data.json ✅
        - semantic\_data.json ✅
        - pose\_stats.json ✅
        
        #text(size: 0.8em, fill: gray)[~3MB]
      ]
    ],
  )
]

#v(1em)

*数据转换要点*：
- *空间采样*：从 860K 标注中随机采样 8,000 条，保持类别比例
- *共现矩阵*：计算 80×80 的共现计数与条件概率
- *姿态聚合*：统计 17 个关键点的可见/不可见/标注概率

// ============================================================================
// 可视设计规划
// ============================================================================
== 可视设计规划

#grid(
  columns: (1fr, 1fr, 1fr),
  column-gutter: 1em,
  [
    #rect(
      fill: rgb("#dbeafe"),
      radius: 8pt,
      inset: 1em,
    )[
      === 📍 空间与尺度视图
      
      - 等高线密度热力图
      - 位置×尺度散点图
      - 类别尺度分布条形图
      
      #v(0.5em)
      #text(size: 0.9em, fill: rgb("#16a34a"), weight: "bold")[
        ✅ 已完成
      ]
    ]
  ],
  [
    #rect(
      fill: rgb("#d1fae5"),
      radius: 8pt,
      inset: 1em,
    )[
      === 🕸️ 语义共现网络
      
      - 力导向节点-链接图
      - 条件概率侧边栏
      - 共现阈值滑块
      
      #v(0.5em)
      #text(size: 0.9em, fill: rgb("#16a34a"), weight: "bold")[
        ✅ 已完成
      ]
    ]
  ],
  [
    #rect(
      fill: rgb("#fef9c3"),
      radius: 8pt,
      inset: 1em,
    )[
      === 🦴 人体姿态视图
      
      - 概率骨架图
      - 关键点环形统计
      - 场景过滤器
      
      #v(0.5em)
      #text(size: 0.9em, fill: rgb("#ea580c"), weight: "bold")[
        🚧 开发中
      ]
    ]
  ]
)

// ============================================================================
// 视图 A：语义共现网络（已完成）
// ============================================================================
== 已完成：语义共现网络

#grid(
  columns: (1fr, 1fr),
  column-gutter: 2em,
  [
    === 可视映射
    
    #table(
      columns: (auto, auto),
      stroke: 0.5pt + gray,
      [视觉通道], [数据属性],
      [节点大小], [类别出现频次],
      [节点颜色], [超类别 (supercategory)],
      [边粗细], [共现次数],
      [边透明度], [共现强度],
    )
    
    #v(0.5em)
    
    === 已实现交互
    
    - *单击* 节点：锁定显示条件概率
    - *双击* 节点：从图中排除该类别
    - *拖拽* 节点：调整布局位置
    - *滑块* 筛选：过滤低共现边
  ],
  [
    #image("images/semantic_view.png", width: 100%)
  ]
)

// ============================================================================
// 视图 B：空间与尺度视图（已完成）
// ============================================================================
== 已完成：空间与尺度视图

#grid(
  columns: (1fr, 1fr),
  column-gutter: 2em,
  [
    === 可视映射
    
    #table(
      columns: (auto, auto),
      stroke: 0.5pt + gray,
      [视觉通道], [数据属性],
      [等高线颜色深度], [物体中心点密度],
      [散点 X 坐标], [归一化水平位置 (0~1)],
      [散点 Y 坐标], [相对面积 (对数刻度)],
      [散点颜色], [尺度类别 (小/中/大)],
      [条形长度], [各尺度类别占比],
    )
    
    #v(0.5em)
    
    === 已实现功能
    
    - 80 类别下拉选择器
    - 热力图密度等高线
    - 尺度分布统计
  ],
  [
    #image("images/spatial_view.png", width: 100%)
  ]
)

// ============================================================================
// 待完成工作
// ============================================================================
== 待完成工作

#grid(
  columns: (1fr, 1fr),
  column-gutter: 2em,
  [
    === 🦴 人体姿态视图
    
    - 概率骨架图：17 个关键点的平均位置
    - 可见性统计：环形图展示各关键点可见概率
    - 误差可视化：1σ/3σ 置信椭圆
    - 场景过滤：按共现物体筛选姿态子集
    
    #v(1em)
    
    === 🔗 视图联动
    
    - Cross-Filtering 机制
    - 框选联动更新
    - 全局状态管理
  ],
  [
    === 🏠 门户页面
    
    - 滚动叙事设计
    - AI 生成背景图
    - 视图跃迁动画
    
    #v(1em)
    
    === 📝 其他工作
    
    - 案例分析与数据洞察
    - 性能优化
    - 项目文档整理
    - 代码重构与注释
  ]
)

// ============================================================================
// 时间规划
// ============================================================================
== 后续时间规划

#table(
  columns: (auto, 1fr, auto),
  stroke: 0.5pt + gray,
  align: (center, left, center),
  [*时间*], [*任务*], [*负责人*],
  [第 1 周], [完成人体姿态视图基础功能], [谢博],
  [第 1 周], [实现视图间 Cross-Filtering 联动], [柯云超],
  [第 2 周], [门户页面滚动叙事设计], [匡航逸],
  [第 2 周], [姿态视图误差椭圆与场景过滤], [谢博],
  [第 3 周], [案例分析与数据洞察挖掘], [全员],
  [第 3 周], [性能优化与代码重构], [柯云超],
  [第 4 周], [项目文档整理与最终汇报准备], [全员],
)

// ============================================================================
// 当前问题与挑战
// ============================================================================
== 当前问题与挑战

#grid(
  columns: (1fr, 1fr),
  column-gutter: 2em,
  [
    === ⚠️ 技术挑战
    
    - *大规模数据渲染*：860K 标注的实时过滤
      - 解决方案：数据采样 + 预聚合
    
    - *力导向布局稳定性*：80 节点的收敛速度
      - 解决方案：限制迭代次数 + 初始布局优化
    
    - *跨视图状态同步*：多视图联动的一致性
      - 解决方案：全局事件总线
  ],
  [
    === 🎯 设计挑战
    
    - *信息密度平衡*：避免视觉过载
      - 解决方案：渐进式披露 + 阈值过滤
    
    - *叙事连贯性*：从门户到仪表盘的过渡
      - 解决方案：滚动动画 + 视觉引导
    
    - *交互一致性*：三个视图的操作统一
      - 解决方案：DESIGN Token 系统
  ]
)

// ============================================================================
// 结束页
// ============================================================================
== 中期汇报结束

#align(center)[
  #text(size: 2em, weight: "bold")[🌌 COCO-Verse]
  
  #v(0.5em)
  
  #text(size: 1.2em)[多视图可视化分析系统]
  
  #v(1em)
  
  #rect(
    fill: rgb("#f0f9ff"),
    radius: 8pt,
    inset: 1em,
  )[
    *当前进度*：数据处理 ✅ | 语义视图 ✅ | 空间视图 ✅ | 姿态视图 🚧
  ]
  
  #v(2em)
  
  Q & A
]
